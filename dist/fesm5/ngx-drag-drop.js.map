{"version":3,"file":"ngx-drag-drop.js.map","sources":["ng://ngx-drag-drop/dnd-utils.ts","ng://ngx-drag-drop/dnd-state.ts","ng://ngx-drag-drop/dnd-draggable.directive.ts","ng://ngx-drag-drop/dnd-dropzone.directive.ts","ng://ngx-drag-drop/dnd-handle.directive.ts","ng://ngx-drag-drop/dnd.module.ts"],"sourcesContent":["import { DropEffect, EffectAllowed } from \"./dnd-types\";\r\n\r\nexport interface DragDropData {\r\n  data?:any;\r\n  type?:string;\r\n}\r\n\r\nexport interface DndEvent extends DragEvent {\r\n  _dndUsingHandle?:boolean;\r\n  _dndDropzoneActive?:true;\r\n}\r\n\r\nexport type DndDragImageOffsetFunction = ( event:DragEvent, dragImage:Element ) => { x:number, y:number };\r\n\r\nexport const DROP_EFFECTS = [ \"move\", \"copy\", \"link\" ] as DropEffect[];\r\n\r\nexport const CUSTOM_MIME_TYPE = \"application/x-dnd\";\r\nexport const JSON_MIME_TYPE = \"application/json\";\r\nexport const MSIE_MIME_TYPE = \"Text\";\r\n\r\nfunction mimeTypeIsCustom( mimeType:string ) {\r\n\r\n  return mimeType.substr( 0, CUSTOM_MIME_TYPE.length ) === CUSTOM_MIME_TYPE;\r\n}\r\n\r\nexport function getWellKnownMimeType( event:DragEvent ):string | null {\r\n\r\n  if( event.dataTransfer ) {\r\n\r\n    const types = event.dataTransfer.types;\r\n\r\n    // IE 9 workaround.\r\n    if( !types ) {\r\n\r\n      return MSIE_MIME_TYPE;\r\n    }\r\n\r\n    for( let i = 0; i < types.length; i++ ) {\r\n\r\n      if( types[ i ] === MSIE_MIME_TYPE\r\n        || types[ i ] === JSON_MIME_TYPE\r\n        || mimeTypeIsCustom( types[ i ] ) ) {\r\n\r\n        return types[ i ];\r\n      }\r\n    }\r\n  }\r\n\r\n  return null;\r\n}\r\n\r\nexport function setDragData( event:DragEvent, data:DragDropData, effectAllowed:EffectAllowed ):void {\r\n\r\n  // Internet Explorer and Microsoft Edge don't support custom mime types, see design doc:\r\n  // https://github.com/marceljuenemann/angular-drag-and-drop-lists/wiki/Data-Transfer-Design\r\n  const mimeType = CUSTOM_MIME_TYPE + (data.type ? (\"-\" + data.type) : \"\");\r\n\r\n  const dataString = JSON.stringify( data );\r\n\r\n  try {\r\n\r\n    event.dataTransfer.setData( mimeType, dataString );\r\n\r\n  }\r\n  catch( e ) {\r\n\r\n    //   Setting a custom MIME type did not work, we are probably in IE or Edge.\r\n    try {\r\n\r\n      event.dataTransfer.setData( JSON_MIME_TYPE, dataString );\r\n\r\n    }\r\n    catch( e ) {\r\n\r\n      //   We are in Internet Explorer and can only use the Text MIME type. Also note that IE\r\n      //   does not allow changing the cursor in the dragover event, therefore we have to choose\r\n      //   the one we want to display now by setting effectAllowed.\r\n      const effectsAllowed = filterEffects( DROP_EFFECTS, effectAllowed );\r\n      event.dataTransfer.effectAllowed = effectsAllowed[ 0 ];\r\n\r\n      event.dataTransfer.setData( MSIE_MIME_TYPE, dataString );\r\n    }\r\n  }\r\n}\r\n\r\nexport function getDropData( event:DragEvent, dragIsExternal:boolean ):DragDropData {\r\n\r\n  // check if the mime type is well known\r\n  const mimeType = getWellKnownMimeType( event );\r\n\r\n  // drag did not originate from [dndDraggable]\r\n  if( dragIsExternal === true ) {\r\n\r\n    if( mimeType !== null\r\n      && mimeTypeIsCustom( mimeType ) ) {\r\n\r\n      // the type of content is well known and safe to handle\r\n      return JSON.parse( event.dataTransfer.getData( mimeType ) );\r\n    }\r\n\r\n    // the contained data is unknown, let user handle it\r\n    return {};\r\n  }\r\n\r\n  // the type of content is well known and safe to handle\r\n  return JSON.parse( event.dataTransfer.getData( mimeType ) );\r\n}\r\n\r\nexport function filterEffects( effects:DropEffect[], allowed:EffectAllowed | DropEffect ):DropEffect[] {\r\n\r\n  if( allowed === \"all\"\r\n    || allowed === \"uninitialized\" ) {\r\n\r\n    return effects;\r\n  }\r\n\r\n  return effects.filter( function( effect ) {\r\n\r\n    return allowed.toLowerCase().indexOf( effect ) !== -1;\r\n  } );\r\n}\r\n\r\nexport function getDirectChildElement( parentElement:Element, childElement:Element ):Element | null {\r\n\r\n  let directChild:Node = childElement;\r\n\r\n  while( directChild.parentNode !== parentElement ) {\r\n\r\n    // reached root node without finding given parent\r\n    if( !directChild.parentNode ) {\r\n\r\n      return null;\r\n    }\r\n\r\n    directChild = directChild.parentNode;\r\n  }\r\n\r\n  return directChild as Element;\r\n}\r\n\r\nexport function shouldPositionPlaceholderBeforeElement( event:DragEvent, element:Element, horizontal:boolean ) {\r\n\r\n  const bounds = element.getBoundingClientRect();\r\n\r\n  // If the pointer is in the upper half of the list item element,\r\n  // we position the placeholder before the list item, otherwise after it.\r\n  if( horizontal ) {\r\n\r\n    return (event.clientX < bounds.left + bounds.width / 2);\r\n  }\r\n\r\n  return (event.clientY < bounds.top + bounds.height / 2);\r\n}\r\n\r\nexport function calculateDragImageOffset( event:DragEvent, dragImage:Element ):{ x:number, y:number } {\r\n\r\n  const dragImageComputedStyle = window.getComputedStyle( dragImage );\r\n  const paddingTop = parseFloat( dragImageComputedStyle.paddingTop ) || 0;\r\n  const paddingLeft = parseFloat( dragImageComputedStyle.paddingLeft ) || 0;\r\n  const borderTop = parseFloat( dragImageComputedStyle.borderTopWidth ) || 0;\r\n  const borderLeft = parseFloat( dragImageComputedStyle.borderLeftWidth ) || 0;\r\n\r\n  return {\r\n    x: event.offsetX + paddingLeft + borderLeft,\r\n    y: event.offsetY + paddingTop + borderTop\r\n  };\r\n}\r\n\r\nexport function setDragImage( event:DragEvent, dragImage:Element, offsetFunction:DndDragImageOffsetFunction ):void {\r\n\r\n  const offset = offsetFunction( event, dragImage ) || {x: 0, y: 0};\r\n\r\n  (event.dataTransfer as any).setDragImage( dragImage, offset.x, offset.y );\r\n}\r\n","import {\r\n  CUSTOM_MIME_TYPE,\r\n  DROP_EFFECTS,\r\n  filterEffects,\r\n  getWellKnownMimeType,\r\n  JSON_MIME_TYPE,\r\n  MSIE_MIME_TYPE\r\n} from \"./dnd-utils\";\r\nimport { DropEffect, EffectAllowed } from \"./dnd-types\";\r\n\r\nexport interface DndState {\r\n  isDragging:boolean;\r\n  dropEffect?:DropEffect;\r\n  effectAllowed?:EffectAllowed;\r\n  type?:string;\r\n}\r\n\r\nconst _dndState:DndState = {\r\n  isDragging: false,\r\n  dropEffect: \"none\",\r\n  effectAllowed: \"all\",\r\n  type: undefined\r\n};\r\n\r\nexport function startDrag( event:DragEvent, effectAllowed:EffectAllowed, type:string | undefined ) {\r\n\r\n  _dndState.isDragging = true;\r\n  _dndState.dropEffect = \"none\";\r\n  _dndState.effectAllowed = effectAllowed;\r\n  _dndState.type = type;\r\n\r\n  event.dataTransfer.effectAllowed = effectAllowed;\r\n}\r\n\r\nexport function endDrag() {\r\n\r\n  _dndState.isDragging = false;\r\n  _dndState.dropEffect = undefined;\r\n  _dndState.effectAllowed = undefined;\r\n  _dndState.type = undefined;\r\n}\r\n\r\nexport function setDropEffect( event:DragEvent, dropEffect:DropEffect ) {\r\n\r\n  if( _dndState.isDragging === true ) {\r\n\r\n    _dndState.dropEffect = dropEffect;\r\n  }\r\n\r\n  event.dataTransfer.dropEffect = dropEffect;\r\n}\r\n\r\nexport function getDropEffect( event:DragEvent, effectAllowed?:EffectAllowed | DropEffect ):DropEffect {\r\n\r\n  const dataTransferEffectAllowed:EffectAllowed = (event.dataTransfer) ? event.dataTransfer.effectAllowed as EffectAllowed : \"uninitialized\";\r\n\r\n  let effects = filterEffects( DROP_EFFECTS, dataTransferEffectAllowed );\r\n\r\n  if( _dndState.isDragging === true ) {\r\n\r\n    effects = filterEffects( effects, _dndState.effectAllowed );\r\n  }\r\n\r\n  if( effectAllowed ) {\r\n\r\n    effects = filterEffects( effects, effectAllowed );\r\n  }\r\n\r\n  // MacOS automatically filters dataTransfer.effectAllowed depending on the modifier keys,\r\n  // therefore the following modifier keys will only affect other operating systems.\r\n  if( effects.length === 0 ) {\r\n\r\n    return \"none\";\r\n  }\r\n\r\n  if( event.ctrlKey && effects.indexOf( \"copy\" ) !== -1 ) {\r\n\r\n    return \"copy\";\r\n  }\r\n\r\n  if( event.altKey && effects.indexOf( \"link\" ) !== -1 ) {\r\n\r\n    return \"link\";\r\n  }\r\n\r\n  return effects[ 0 ] as DropEffect;\r\n}\r\n\r\nexport function getDndType( event:DragEvent ):string | undefined {\r\n\r\n  if( _dndState.isDragging === true ) {\r\n\r\n    return _dndState.type;\r\n  }\r\n\r\n  const mimeType = getWellKnownMimeType( event );\r\n\r\n  if( mimeType === null ) {\r\n\r\n    return undefined;\r\n  }\r\n\r\n  if( mimeType === MSIE_MIME_TYPE\r\n    || mimeType === JSON_MIME_TYPE ) {\r\n\r\n    return undefined;\r\n  }\r\n\r\n  return mimeType.substr( CUSTOM_MIME_TYPE.length + 1 ) || undefined;\r\n}\r\n\r\nexport function isExternalDrag():boolean {\r\n\r\n  return _dndState.isDragging === false;\r\n}\r\n\r\nexport const dndState:Readonly<DndState> = _dndState as Readonly<DndState>;\r\n","import {\r\n  AfterViewInit,\r\n  Directive,\r\n  ElementRef,\r\n  EventEmitter,\r\n  HostBinding,\r\n  HostListener,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  Output,\r\n  Renderer2\r\n} from \"@angular/core\";\r\nimport { calculateDragImageOffset, DndDragImageOffsetFunction, DndEvent, setDragData, setDragImage } from \"./dnd-utils\";\r\nimport { DndHandleDirective } from \"./dnd-handle.directive\";\r\nimport { dndState, endDrag, startDrag } from \"./dnd-state\";\r\nimport { EffectAllowed } from \"./dnd-types\";\r\n\r\n@Directive( {\r\n  selector: \"[dndDragImageRef]\"\r\n} )\r\nexport class DndDragImageRefDirective {\r\n\r\n  constructor( parent:DndDraggableDirective,\r\n               elementRef:ElementRef ) {\r\n\r\n    parent.registerDragImage( elementRef );\r\n  }\r\n}\r\n\r\n@Directive( {\r\n  selector: \"[dndDraggable]\",\r\n  exportAs: \"ngxDraggable\"\r\n} )\r\nexport class DndDraggableDirective implements AfterViewInit, OnDestroy {\r\n\r\n  @Input()\r\n  dndDraggable:any;\r\n\r\n  @Input()\r\n  dndEffectAllowed:EffectAllowed = \"copy\";\r\n\r\n  @Input()\r\n  dndType?:string;\r\n\r\n  @Input()\r\n  dndDraggingClass = \"dndDragging\";\r\n\r\n  @Input()\r\n  dndDraggingSourceClass = \"dndDraggingSource\";\r\n\r\n  @Input()\r\n  dndDraggableDisabledClass = \"dndDraggableDisabled\";\r\n\r\n  @Input()\r\n  dndDragImageOffsetFunction:DndDragImageOffsetFunction = calculateDragImageOffset;\r\n\r\n  @Output()\r\n  readonly dndStart:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\r\n\r\n  @Output()\r\n  readonly dndDrag:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\r\n\r\n  @Output()\r\n  readonly dndEnd:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\r\n\r\n  @Output()\r\n  readonly dndMoved:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\r\n\r\n  @Output()\r\n  readonly dndCopied:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\r\n\r\n  @Output()\r\n  readonly dndLinked:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\r\n\r\n  @Output()\r\n  readonly dndCanceled:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\r\n\r\n  @HostBinding( \"attr.draggable\" )\r\n  draggable = true;\r\n\r\n  private dndHandle?:DndHandleDirective;\r\n\r\n  private dndDragImageElementRef?:ElementRef;\r\n\r\n  private dragImage:Element;\r\n\r\n  private isDragStarted:boolean = false;\r\n\r\n  private readonly dragEventHandler:( event:DragEvent ) => void = ( event:DragEvent ) => this.onDrag( event );\r\n\r\n  private dragStartListener;\r\n  private dragEndListener;\r\n\r\n  private componentThatLocked: any;\r\n\r\n  @Input()\r\n  set dndDisableIf( value:boolean ) {\r\n\r\n    this.draggable = !value;\r\n\r\n    if( this.draggable ) {\r\n\r\n      this.renderer.removeClass( this.elementRef.nativeElement, this.dndDraggableDisabledClass );\r\n    }\r\n    else {\r\n\r\n      this.renderer.addClass( this.elementRef.nativeElement, this.dndDraggableDisabledClass );\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set dndDisableDragIf( value:boolean ) {\r\n    this.dndDisableIf = value;\r\n  }\r\n\r\n  constructor( private elementRef:ElementRef,\r\n               private renderer:Renderer2,\r\n               private ngZone:NgZone ) {\r\n  }\r\n\r\n  ngAfterViewInit():void {\r\n    this.addHostListeners();\r\n    this.ngZone.runOutsideAngular( () => {\r\n      this.elementRef.nativeElement.addEventListener( \"drag\", this.dragEventHandler );\r\n    } );\r\n  }\r\n\r\n  ngOnDestroy():void {\r\n    this.elementRef.nativeElement.removeEventListener( \"drag\", this.dragEventHandler );\r\n    if(this.isDragStarted === true) {\r\n      endDrag()\r\n    }\r\n  }\r\n\r\n  \r\n  toggleDragLock(value: boolean, component: any, force: boolean = false):void {\r\n    if (value) {\r\n      this.componentThatLocked = component;\r\n      this.removeHostListeners();\r\n    } else if(component === this.componentThatLocked) {\r\n      this.componentThatLocked = null;\r\n      this.addHostListeners();\r\n    }\r\n  }\r\n\r\n  //@HostListener( \"dragstart\", [ \"$event\" ] )\r\n  onDragStart( event:DndEvent ) {\r\n\r\n    if( this.draggable === false ) {\r\n\r\n      return false;\r\n    }\r\n\r\n    // check if there is dnd handle and if the dnd handle was used to start the drag\r\n    if( typeof this.dndHandle !== \"undefined\"\r\n      && typeof event._dndUsingHandle === \"undefined\" ) {\r\n\r\n      return false;\r\n    }\r\n\r\n    // initialize global state\r\n    startDrag( event, this.dndEffectAllowed, this.dndType );\r\n\r\n    this.isDragStarted = true;\r\n\r\n    setDragData( event, {data: this.dndDraggable, type: this.dndType}, dndState.effectAllowed );\r\n\r\n    this.dragImage = this.determineDragImage();\r\n\r\n    // set dragging css class prior to setDragImage so styles are applied before\r\n    // TODO breaking change: add class to elementRef rather than drag image which could be another element\r\n    this.renderer.addClass( this.dragImage, this.dndDraggingClass );\r\n\r\n    // set custom dragimage if present\r\n    // set dragimage if drag is started from dndHandle\r\n    if( typeof this.dndDragImageElementRef !== \"undefined\"\r\n      || typeof event._dndUsingHandle !== \"undefined\" ) {\r\n\r\n      setDragImage( event, this.dragImage, this.dndDragImageOffsetFunction );\r\n    }\r\n\r\n    // add dragging source css class on first drag event\r\n    const unregister = this.renderer.listen( this.elementRef.nativeElement, \"drag\", () => {\r\n\r\n      this.renderer.addClass( this.elementRef.nativeElement, this.dndDraggingSourceClass );\r\n      unregister();\r\n    } );\r\n\r\n    this.dndStart.emit( event );\r\n\r\n    // event.stopPropagation();\r\n  }\r\n\r\n  onDrag( event:DragEvent ) {\r\n\r\n    this.dndDrag.emit( event );\r\n  }\r\n\r\n  //@HostListener( \"dragend\", [ \"$event\" ] )\r\n  onDragEnd( event:DragEvent ) {\r\n\r\n    // get drop effect from custom stored state as its not reliable across browsers\r\n    const dropEffect = dndState.dropEffect;\r\n\r\n    let dropEffectEmitter:EventEmitter<DragEvent>;\r\n\r\n    switch( dropEffect ) {\r\n\r\n      case \"copy\":\r\n        dropEffectEmitter = this.dndCopied;\r\n        break;\r\n\r\n      case \"link\":\r\n        dropEffectEmitter = this.dndLinked;\r\n        break;\r\n\r\n      case \"move\":\r\n        dropEffectEmitter = this.dndMoved;\r\n        break;\r\n\r\n      default:\r\n        dropEffectEmitter = this.dndCanceled;\r\n        break;\r\n    }\r\n\r\n    dropEffectEmitter.emit( event );\r\n    this.dndEnd.emit( event );\r\n\r\n    // reset global state\r\n    endDrag();\r\n\r\n    this.isDragStarted = false;\r\n\r\n    this.renderer.removeClass( this.dragImage, this.dndDraggingClass );\r\n\r\n    // IE9 special hammering\r\n    window.setTimeout( () => {\r\n      this.renderer.removeClass( this.elementRef.nativeElement, this.dndDraggingSourceClass );\r\n    }, 0 );\r\n\r\n    event.stopPropagation();\r\n  }\r\n\r\n  registerDragHandle( handle:DndHandleDirective | undefined ) {\r\n\r\n    this.dndHandle = handle;\r\n  }\r\n\r\n  registerDragImage( elementRef:ElementRef | undefined ) {\r\n\r\n    this.dndDragImageElementRef = elementRef;\r\n  }\r\n\r\n  private determineDragImage():Element {\r\n\r\n    // evaluate custom drag image existence\r\n    if( typeof this.dndDragImageElementRef !== \"undefined\" ) {\r\n\r\n      return this.dndDragImageElementRef.nativeElement as Element;\r\n    }\r\n    else {\r\n\r\n      return this.elementRef.nativeElement;\r\n    }\r\n  }\r\n\r\n  private addHostListeners():void {\r\n    this.draggable = true;\r\n    if (!this.dragStartListener) {\r\n      this.dragStartListener = this.renderer.listen(this.elementRef.nativeElement, 'dragstart', this.onDragStart.bind(this));\r\n    }\r\n    if (!this.dragEndListener) {\r\n      this.dragEndListener = this.renderer.listen(this.elementRef.nativeElement, 'dragend', this.onDragEnd.bind(this));\r\n    }\r\n  }\r\n\r\n\r\n  private removeHostListeners():void {\r\n    this.draggable = false;\r\n    if(this.dragStartListener) {\r\n      this.dragStartListener();\r\n    }\r\n    if(this.dragEndListener){\r\n      this.dragEndListener();\r\n    }\r\n  }\r\n}\r\n","import {\r\n  AfterViewInit,\r\n  ContentChild,\r\n  Directive,\r\n  ElementRef,\r\n  EventEmitter,\r\n  HostListener,\r\n  Input,\r\n  NgZone,\r\n  OnDestroy,\r\n  Output,\r\n  Renderer2\r\n} from \"@angular/core\";\r\nimport {\r\n  DndEvent,\r\n  DragDropData,\r\n  getDirectChildElement,\r\n  getDropData,\r\n  shouldPositionPlaceholderBeforeElement\r\n} from \"./dnd-utils\";\r\nimport { getDndType, getDropEffect, isExternalDrag, setDropEffect } from \"./dnd-state\";\r\nimport { DropEffect, EffectAllowed } from \"./dnd-types\";\r\n\r\nexport interface DndDropEvent {\r\n  event:DragEvent;\r\n  dropEffect:DropEffect;\r\n  isExternal:boolean;\r\n  data?:any;\r\n  index?:number;\r\n  type?:any;\r\n}\r\n\r\n@Directive( {\r\n  selector: \"[dndPlaceholderRef]\"\r\n} )\r\nexport class DndPlaceholderRefDirective {\r\n\r\n  constructor( public readonly elementRef:ElementRef ) {\r\n  }\r\n}\r\n\r\n@Directive( {\r\n  selector: \"[dndDropzone]\"\r\n} )\r\nexport class DndDropzoneDirective implements AfterViewInit, OnDestroy {\r\n\r\n  @Input()\r\n  dndDropzone?:string[];\r\n\r\n  @Input()\r\n  dndEffectAllowed:EffectAllowed;\r\n\r\n  @Input()\r\n  dndAllowExternal:boolean = false;\r\n\r\n  @Input()\r\n  dndHorizontal:boolean = false;\r\n\r\n  @Input()\r\n  dndDragoverClass:string = \"dndDragover\";\r\n\r\n  @Input()\r\n  dndDropzoneDisabledClass = \"dndDropzoneDisabled\";\r\n\r\n  @Output()\r\n  readonly dndDragover:EventEmitter<DragEvent> = new EventEmitter<DragEvent>();\r\n\r\n  @Output()\r\n  readonly dndDrop:EventEmitter<DndDropEvent> = new EventEmitter<DndDropEvent>();\r\n\r\n  @ContentChild( DndPlaceholderRefDirective )\r\n  private readonly dndPlaceholderRef?:DndPlaceholderRefDirective;\r\n\r\n  private placeholder:Element | null = null;\r\n\r\n  private disabled:boolean = false;\r\n\r\n  private readonly dragEnterEventHandler:( event:DragEvent ) => void = ( event:DragEvent ) => this.onDragEnter( event );\r\n  private readonly dragOverEventHandler:( event:DragEvent ) => void = ( event:DragEvent ) => this.onDragOver( event );\r\n  private readonly dragLeaveEventHandler:( event:DragEvent ) => void = ( event:DragEvent ) => this.onDragLeave( event );\r\n\r\n  @Input()\r\n  set dndDisableIf( value:boolean ) {\r\n\r\n    this.disabled = !!value;\r\n\r\n    if( this.disabled ) {\r\n\r\n      this.renderer.addClass( this.elementRef.nativeElement, this.dndDropzoneDisabledClass );\r\n    }\r\n    else {\r\n\r\n      this.renderer.removeClass( this.elementRef.nativeElement, this.dndDropzoneDisabledClass );\r\n    }\r\n  }\r\n\r\n  @Input()\r\n  set dndDisableDropIf( value:boolean ) {\r\n    this.dndDisableIf = value;\r\n  }\r\n\r\n  constructor( private ngZone:NgZone,\r\n               private elementRef:ElementRef,\r\n               private renderer:Renderer2 ) {\r\n  }\r\n\r\n  ngAfterViewInit():void {\r\n\r\n    this.placeholder = this.tryGetPlaceholder();\r\n\r\n    this.removePlaceholderFromDOM();\r\n\r\n    this.ngZone.runOutsideAngular( () => {\r\n      this.elementRef.nativeElement.addEventListener( \"dragenter\", this.dragEnterEventHandler );\r\n      this.elementRef.nativeElement.addEventListener( \"dragover\", this.dragOverEventHandler );\r\n      this.elementRef.nativeElement.addEventListener( \"dragleave\", this.dragLeaveEventHandler );\r\n    } );\r\n  }\r\n\r\n  ngOnDestroy():void {\r\n    this.elementRef.nativeElement.removeEventListener( \"dragenter\", this.dragEnterEventHandler );\r\n    this.elementRef.nativeElement.removeEventListener( \"dragover\", this.dragOverEventHandler );\r\n    this.elementRef.nativeElement.removeEventListener( \"dragleave\", this.dragLeaveEventHandler );\r\n  }\r\n\r\n  onDragEnter( event:DndEvent ) {\r\n\r\n    // check if another dropzone is activated\r\n    if( event._dndDropzoneActive === true ) {\r\n\r\n      this.cleanupDragoverState();\r\n      return;\r\n    }\r\n\r\n    // set as active if the target element is inside this dropzone\r\n    if( typeof event._dndDropzoneActive === \"undefined\" ) {\r\n\r\n      const newTarget = document.elementFromPoint( event.clientX, event.clientY );\r\n\r\n      if( this.elementRef.nativeElement.contains( newTarget ) ) {\r\n\r\n        event._dndDropzoneActive = true;\r\n      }\r\n    }\r\n\r\n    // check if this drag event is allowed to drop on this dropzone\r\n    const type = getDndType( event );\r\n    if( this.isDropAllowed( type ) === false ) {\r\n\r\n      return;\r\n    }\r\n\r\n    // allow the dragenter\r\n    event.preventDefault();\r\n  }\r\n\r\n  onDragOver( event:DragEvent ) {\r\n    // With nested dropzones, we want to ignore this event if a child dropzone\r\n    // has already handled a dragover.  Historically, event.stopPropagation() was\r\n    // used to prevent this bubbling, but that prevents any dragovers outside the\r\n    // ngx-drag-drop component, and stops other use cases such as scrolling on drag.\r\n    // Instead, we can check if the event was already prevented by a child and bail early.\r\n    if( event.defaultPrevented ) {\r\n\r\n      return;\r\n    }\r\n\r\n    // check if this drag event is allowed to drop on this dropzone\r\n    const type = getDndType( event );\r\n    if( this.isDropAllowed( type ) === false ) {\r\n\r\n      return;\r\n    }\r\n\r\n    this.checkAndUpdatePlaceholderPosition( event );\r\n\r\n    const dropEffect = getDropEffect( event, this.dndEffectAllowed );\r\n\r\n    if( dropEffect === \"none\" ) {\r\n\r\n      this.cleanupDragoverState();\r\n      return;\r\n    }\r\n\r\n    // allow the dragover\r\n    event.preventDefault();\r\n\r\n    // set the drop effect\r\n    setDropEffect( event, dropEffect );\r\n\r\n    this.dndDragover.emit( event );\r\n\r\n    this.renderer.addClass( this.elementRef.nativeElement, this.dndDragoverClass );\r\n  }\r\n\r\n  @HostListener( \"drop\", [ \"$event\" ] )\r\n  onDrop( event:DragEvent ) {\r\n\r\n    try {\r\n\r\n      // check if this drag event is allowed to drop on this dropzone\r\n      const type = getDndType( event );\r\n      if( this.isDropAllowed( type ) === false ) {\r\n\r\n        return;\r\n      }\r\n\r\n      const data:DragDropData = getDropData( event, isExternalDrag() );\r\n\r\n      if( this.isDropAllowed( data.type ) === false ) {\r\n\r\n        return;\r\n      }\r\n\r\n      // signal custom drop handling\r\n      event.preventDefault();\r\n\r\n      const dropEffect = getDropEffect( event );\r\n\r\n      setDropEffect( event, dropEffect );\r\n\r\n      if( dropEffect === \"none\" ) {\r\n\r\n        return;\r\n      }\r\n\r\n      const dropIndex = this.getPlaceholderIndex();\r\n\r\n      // if for whatever reason the placeholder is not present in the DOM but it should be there\r\n      // we don't allow/emit the drop event since it breaks the contract\r\n      // seems to only happen if drag and drop is executed faster than the DOM updates\r\n      if( dropIndex === -1 ) {\r\n\r\n        return;\r\n      }\r\n\r\n      this.dndDrop.emit( {\r\n        event: event,\r\n        dropEffect: dropEffect,\r\n        isExternal: isExternalDrag(),\r\n        data: data.data,\r\n        index: dropIndex,\r\n        type: type,\r\n      } );\r\n\r\n      event.stopPropagation();\r\n\r\n    }\r\n    finally {\r\n\r\n      this.cleanupDragoverState();\r\n    }\r\n  }\r\n\r\n  onDragLeave( event:DndEvent ) {\r\n\r\n    // check if still inside this dropzone and not yet handled by another dropzone\r\n    if( typeof event._dndDropzoneActive === \"undefined\" ) {\r\n\r\n      const newTarget = document.elementFromPoint( event.clientX, event.clientY );\r\n\r\n      if( this.elementRef.nativeElement.contains( newTarget ) ) {\r\n\r\n        event._dndDropzoneActive = true;\r\n        return;\r\n      }\r\n    }\r\n\r\n    this.cleanupDragoverState();\r\n\r\n    // cleanup drop effect when leaving dropzone\r\n    setDropEffect( event, \"none\" );\r\n  }\r\n\r\n  private isDropAllowed( type?:string ):boolean {\r\n\r\n    // dropzone is disabled -> deny it\r\n    if( this.disabled === true ) {\r\n\r\n      return false;\r\n    }\r\n\r\n    // if drag did not start from our directive\r\n    // and external drag sources are not allowed -> deny it\r\n    if( isExternalDrag() === true\r\n      && this.dndAllowExternal === false ) {\r\n\r\n      return false;\r\n    }\r\n\r\n    // no filtering by types -> allow it\r\n    if( !this.dndDropzone ) {\r\n\r\n      return true;\r\n    }\r\n\r\n    // no type set -> allow it\r\n    if( !type ) {\r\n\r\n      return true;\r\n    }\r\n\r\n    if( Array.isArray( this.dndDropzone ) === false ) {\r\n\r\n      throw new Error( \"dndDropzone: bound value to [dndDropzone] must be an array!\" );\r\n    }\r\n\r\n    // if dropzone contains type -> allow it\r\n    return this.dndDropzone.indexOf( type ) !== -1;\r\n  }\r\n\r\n  private tryGetPlaceholder():Element | null {\r\n\r\n    if( typeof this.dndPlaceholderRef !== \"undefined\" ) {\r\n\r\n      return this.dndPlaceholderRef.elementRef.nativeElement as Element;\r\n    }\r\n\r\n    // TODO nasty workaround needed because if ng-container / template is used @ContentChild() or DI will fail because\r\n    // of wrong context see angular bug https://github.com/angular/angular/issues/13517\r\n    return this.elementRef.nativeElement.querySelector( \"[dndPlaceholderRef]\" );\r\n  }\r\n\r\n  private removePlaceholderFromDOM() {\r\n\r\n    if( this.placeholder !== null\r\n      && this.placeholder.parentNode !== null ) {\r\n      this.placeholder.parentNode.removeChild( this.placeholder );\r\n    }\r\n  }\r\n\r\n  private checkAndUpdatePlaceholderPosition( event:DragEvent ):void {\r\n\r\n    if( this.placeholder === null ) {\r\n\r\n      return;\r\n    }\r\n\r\n    // make sure the placeholder is in the DOM\r\n    if( this.placeholder.parentNode !== this.elementRef.nativeElement ) {\r\n\r\n      this.renderer.appendChild( this.elementRef.nativeElement, this.placeholder );\r\n    }\r\n\r\n    // update the position if the event originates from a child element of the dropzone\r\n    const directChild = getDirectChildElement( this.elementRef.nativeElement, event.target as Element );\r\n\r\n    // early exit if no direct child or direct child is placeholder\r\n    if( directChild === null\r\n      || directChild === this.placeholder ) {\r\n\r\n      return;\r\n    }\r\n\r\n    const positionPlaceholderBeforeDirectChild = shouldPositionPlaceholderBeforeElement( event, directChild, this.dndHorizontal );\r\n\r\n    if( positionPlaceholderBeforeDirectChild ) {\r\n\r\n      // do insert before only if necessary\r\n      if( directChild.previousSibling !== this.placeholder ) {\r\n\r\n        this.renderer.insertBefore( this.elementRef.nativeElement, this.placeholder, directChild );\r\n      }\r\n    }\r\n    else {\r\n\r\n      // do insert after only if necessary\r\n      if( directChild.nextSibling !== this.placeholder ) {\r\n\r\n        this.renderer.insertBefore( this.elementRef.nativeElement, this.placeholder, directChild.nextSibling );\r\n      }\r\n    }\r\n  }\r\n\r\n  private getPlaceholderIndex():number | undefined {\r\n\r\n    if( this.placeholder === null ) {\r\n\r\n      return undefined;\r\n    }\r\n\r\n    const element = this.elementRef.nativeElement as HTMLElement;\r\n\r\n    return Array.prototype.indexOf.call( element.children, this.placeholder );\r\n  }\r\n\r\n  private cleanupDragoverState() {\r\n\r\n    this.renderer.removeClass( this.elementRef.nativeElement, this.dndDragoverClass );\r\n\r\n    this.removePlaceholderFromDOM();\r\n  }\r\n}\r\n","import { Directive, HostBinding, HostListener } from \"@angular/core\";\r\nimport { DndEvent } from \"./dnd-utils\";\r\nimport { DndDraggableDirective } from \"./dnd-draggable.directive\";\r\n\r\n@Directive( {\r\n  selector: \"[dndHandle]\"\r\n} )\r\nexport class DndHandleDirective {\r\n\r\n  @HostBinding( \"attr.draggable\" )\r\n  draggable = true;\r\n\r\n  constructor(private parent:DndDraggableDirective ) {\r\n\r\n    parent.registerDragHandle( this );\r\n  }\r\n\r\n  @HostListener( \"dragstart\", [ \"$event\" ] )\r\n  @HostListener( \"dragend\", [ \"$event\" ] )\r\n  onDragEvent( event:DndEvent ) {\r\n    this.parent.toggleDragLock(false, null, true);\r\n    event._dndUsingHandle = true;\r\n  }\r\n}\r\n","import { NgModule } from \"@angular/core\";\r\nimport { CommonModule } from \"@angular/common\";\r\nimport { DndDraggableDirective, DndDragImageRefDirective } from \"./dnd-draggable.directive\";\r\nimport { DndDropzoneDirective, DndPlaceholderRefDirective } from \"./dnd-dropzone.directive\";\r\nimport { DndHandleDirective } from \"./dnd-handle.directive\";\r\n\r\n@NgModule( {\r\n  imports: [\r\n    CommonModule\r\n  ],\r\n  declarations: [\r\n    DndDraggableDirective,\r\n    DndDropzoneDirective,\r\n    DndHandleDirective,\r\n    DndPlaceholderRefDirective,\r\n    DndDragImageRefDirective\r\n  ],\r\n  exports: [\r\n    DndDraggableDirective,\r\n    DndDropzoneDirective,\r\n    DndHandleDirective,\r\n    DndPlaceholderRefDirective,\r\n    DndDragImageRefDirective\r\n  ]\r\n} )\r\nexport class DndModule {\r\n}\r\n"],"names":[],"mappings":"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"}
